spring.application.name=analytics-service

# ===============================
# \u041D\u0410\u0421\u0422\u0420\u041E\u0419\u041A\u0418 \u0421\u0415\u0420\u0412\u0415\u0420\u0410
# ===============================

server.port=${SERVER_PORT:8090}

# ===============================
# KAFKA CONSUMER CONFIGURATION
# ===============================

# Kafka Bootstrap Servers (\u043C\u043E\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F KAFKA_BOOTSTRAP_SERVERS)
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

# Kafka Consumer Configuration
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP_ID:analytics-service-group}
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=true

# Kafka Producer Configuration (\u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445)
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3

# ===============================
# \u041D\u0410\u0421\u0422\u0420\u041E\u0419\u041A\u0418 \u0410\u0413\u0420\u0415\u0413\u0410\u0426\u0418\u0418 \u0410\u041D\u0410\u041B\u0418\u0422\u0418\u041A\u0418
# ===============================

# \u0418\u043D\u0442\u0435\u0440\u0432\u0430\u043B \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438 \u0438 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0438 \u0432 Kafka (\u0432 \u043C\u0438\u043B\u043B\u0438\u0441\u0435\u043A\u0443\u043D\u0434\u0430\u0445)
# \u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E: 60000 (1 \u043C\u0438\u043D\u0443\u0442\u0430)
# \u041C\u043E\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F ANALYTICS_AGGREGATION_INTERVAL_MS
analytics.aggregation.interval-ms=${ANALYTICS_AGGREGATION_INTERVAL_MS:60000}

# ===============================
# \u041D\u0410\u0421\u0422\u0420\u041E\u0419\u041A\u0418 \u041B\u041E\u0413\u0418\u0420\u041E\u0412\u0410\u041D\u0418\u042F
# ===============================

# \u0423\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u043B\u044F \u0432\u0441\u0435\u0433\u043E \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F
logging.level.root=INFO

# ===============================
# ELK STACK \u041D\u0410\u0421\u0422\u0420\u041E\u0419\u041A\u0418
# ===============================

# \u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C/\u0432\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0443 \u043B\u043E\u0433\u043E\u0432 \u0432 Logstash
logging.logstash.enabled=${LOGSTASH_ENABLED:false}
# \u0425\u043E\u0441\u0442 Logstash (\u043C\u043E\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F LOGSTASH_HOST)
logging.logstash.host=${LOGSTASH_HOST:logstash}
# \u041F\u043E\u0440\u0442 Logstash (\u043C\u043E\u0436\u043D\u043E \u043F\u0435\u0440\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u0443\u044E \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u044F LOGSTASH_PORT)
logging.logstash.port=${LOGSTASH_PORT:5000}

# \u0423\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u043B\u044F Kafka
logging.level.org.apache.kafka=WARN
logging.level.org.springframework.kafka=INFO
logging.level.org.springframework.kafka.listener=INFO

# \u0423\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0434\u043B\u044F analytics
logging.level.online.ityura.analytics=INFO
logging.level.online.ityura.analytics.consumer=DEBUG
