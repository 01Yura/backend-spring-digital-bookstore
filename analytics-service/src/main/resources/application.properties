spring.application.name=analytics-service

# ===============================
# НАСТРОЙКИ СЕРВЕРА
# ===============================

server.port=${SERVER_PORT:8090}

# ===============================
# KAFKA CONSUMER CONFIGURATION
# ===============================

# Kafka Bootstrap Servers (можно переопределить через переменную окружения KAFKA_BOOTSTRAP_SERVERS)
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}

# Kafka Consumer Configuration
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP_ID:analytics-service-group}
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=true

# Kafka Producer Configuration (для отправки агрегированных данных)
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3

# ===============================
# НАСТРОЙКИ АГРЕГАЦИИ АНАЛИТИКИ
# ===============================

# Интервал агрегации и отправки статистики в Kafka (в миллисекундах)
# По умолчанию: 60000 (1 минута)
# Можно переопределить через переменную окружения ANALYTICS_AGGREGATION_INTERVAL_MS
analytics.aggregation.interval-ms=${ANALYTICS_AGGREGATION_INTERVAL_MS:60000}

# ===============================
# НАСТРОЙКИ ЛОГИРОВАНИЯ
# ===============================

# Уровень логирования для всего приложения
logging.level.root=INFO

# ===============================
# ELK STACK НАСТРОЙКИ
# ===============================

# Включить/выключить отправку логов в Logstash
logging.logstash.enabled=${LOGSTASH_ENABLED:true}
# Хост Logstash (можно переопределить через переменную окружения LOGSTASH_HOST)
logging.logstash.host=${LOGSTASH_HOST:logstash}
# Порт Logstash (можно переопределить через переменную окружения LOGSTASH_PORT)
logging.logstash.port=${LOGSTASH_PORT:5000}

# Уровень логирования для Kafka
logging.level.org.apache.kafka=WARN
logging.level.org.springframework.kafka=INFO
logging.level.org.springframework.kafka.listener=DEBUG

# Уровень логирования для analytics
logging.level.online.ityura.analytics=INFO
logging.level.online.ityura.analytics.consumer=DEBUG
